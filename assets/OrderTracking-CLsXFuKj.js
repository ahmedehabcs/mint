import{R as e,G as O,H as S,D as i,I as F,C as D,J as I,K as P,E as z,M as T,r as n}from"./index-Py7kvHa0.js";import{t as N,c as A}from"./orders-D3WQDiqB.js";import{B as d}from"./Button-V8RViXZE.js";const B=({formData:t,handleInputChange:r,handleTrackOrder:a,loading:l,error:c})=>e.createElement("div",{className:" border border-[var(--color-border)] p-6 md:p-10 rounded-xl shadow-md"},e.createElement("h2",{className:"text-lg font-semibold text-[var(--color-text)] mb-4"},"Order Lookup"),e.createElement("form",{onSubmit:a,className:"space-y-6"},e.createElement("div",{className:"grid md:grid-cols-2 gap-6"},e.createElement("div",{className:"relative"},e.createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-[var(--color-text)] mb-2"},"Email Address"),e.createElement("div",{className:"relative"},e.createElement(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--color-text-light)] w-5 h-5"}),e.createElement("input",{type:"email",id:"email",name:"email",value:t.email,onChange:r,className:"w-full pl-10 pr-4 py-3 border border-[var(--color-border)] input-color rounded-md focus:ring-2 focus:ring-[var(--color-main)] transition",placeholder:"Enter your email",required:!0}))),e.createElement("div",{className:"relative"},e.createElement("label",{htmlFor:"orderNumber",className:"block text-sm font-medium text-[var(--color-text)] mb-2"},"Order #"),e.createElement("div",{className:"relative"},e.createElement(S,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--color-text-light)] w-5 h-5"}),e.createElement("input",{type:"text",id:"orderNumber",name:"orderNumber",value:t.orderNumber,onChange:r,className:"w-full pl-10 pr-4 py-3 border border-[var(--color-border)] input-color rounded-md focus:ring-2 focus:ring-[var(--color-main)] transition",placeholder:"e.g., ORD-11111111",required:!0})))),c&&e.createElement("div",{className:"bg-[var(--color-stock-low-bg)] border border-[var(--color-stock-low)] rounded-lg p-4"},e.createElement("div",{className:"flex items-center"},e.createElement(i,{className:"w-5 h-5 text-[var(--color-error)] mr-2"}),e.createElement("p",{className:"text-[var(--color-stock-low-text)]"},c))),e.createElement("div",{className:"space-y-4"},e.createElement(d,{type:"submit",disabled:l,loading:l,variant:"primary",size:"large",className:"w-full"},e.createElement(F,{className:"w-5 h-5 mr-2"}),l?"Searching...":"Find My Order"),e.createElement("p",{className:"text-sm text-[var(--color-text-light)] text-center"},"Enter your email and order number to view details.")))),G=({status:t})=>{const r=c=>{switch(c){case"pending":return e.createElement(T,{className:"w-5 h-5"});case"confirmed":return e.createElement(z,{className:"w-5 h-5"});case"shipped":return e.createElement(P,{className:"w-5 h-5"});case"delivered":return e.createElement(I,{className:"w-5 h-5"});case"canceled":return e.createElement(i,{className:"w-5 h-5"});default:return e.createElement(D,{className:"w-5 h-5"})}},a=c=>{switch(c){case"pending":return"bg-[var(--color-waiting)] text-[var(--color-background)]";case"confirmed":return"bg-[var(--color-approved)] text-[var(--color-background)]";case"shipped":return"bg-[var(--color-shipped)] text-[var(--color-background)]";case"delivered":return"bg-[var(--color-delivered)] text-[var(--color-background)]";case"canceled":return"bg-[var(--color-canceled)] text-[var(--color-background)]";default:return"bg-[var(--color-secondary)] text-[var(--color-background)]"}},l=c=>{switch(c){case"pending":return"Pending";case"confirmed":return"Confirmed";case"shipped":return"Shipped";case"delivered":return"Delivered";case"canceled":return"Canceled";default:return c}};return e.createElement("div",{className:"flex items-center space-x-3 mb-6"},e.createElement("span",{className:"text-sm font-medium text-[var(--color-text-light)] uppercase"},"Status"),e.createElement("div",{className:`px-4 py-1 text-xs font-bold rounded-full flex items-center gap-2 ${a(t)}`},r(t),l(t)))},x=({title:t,children:r,className:a=""})=>e.createElement("div",{className:`p-4 rounded-lg border border-[var(--color-border)] ${a}`},e.createElement("h3",{className:"text-lg font-semibold text-[var(--color-text)] mb-4"},t),r),L=({items:t})=>e.createElement("div",{className:"mt-8"},e.createElement("h3",{className:"text-lg font-semibold text-[var(--color-text)] mb-4"},"Order Items"),e.createElement("div",{className:"space-y-4"},t.map((r,a)=>e.createElement("div",{key:a,className:"flex items-center space-x-4 p-4 rounded-lg border border-[var(--color-border)]"},r.image&&e.createElement("img",{src:r.image,alt:r.name,className:"w-16 h-16 object-cover rounded-lg"}),e.createElement("div",{className:"flex-1"},e.createElement("h4",{className:"font-medium text-[var(--color-text)]"},r.name),e.createElement("p",{className:"text-sm text-[var(--color-text-light)]"},r.color," • Size ",r.size," • Qty: ",r.quantity)),e.createElement("div",{className:"text-right"},e.createElement("p",{className:"font-semibold text-[var(--color-text)]"},"EGP",(r.price*r.quantity).toFixed(2)),e.createElement("p",{className:"text-sm text-[var(--color-text-light)]"},"EGP",r.price.toFixed(2)," each")))))),q=({order:t,canCancelOrder:r,onCancelOrder:a})=>e.createElement("article",{className:"p-6 md:p-10 rounded-xl shadow-md border border-[var(--color-border)]"},e.createElement(G,{status:t.status}),e.createElement("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},e.createElement(x,{title:"Order Information"},e.createElement("div",{className:"space-y-3"},e.createElement("div",null,e.createElement("span",{className:"text-sm font-medium text-[var(--color-text-light)]"},"Order Number:"),e.createElement("p",{className:"text-[var(--color-text)] font-mono"},t.orderNumber)),e.createElement("div",null,e.createElement("span",{className:"text-sm font-medium text-[var(--color-text-light)]"},"Order Date:"),e.createElement("p",{className:"text-[var(--color-text)]"},new Date(t.createdAt).toLocaleDateString())),e.createElement("div",null,e.createElement("span",{className:"text-sm font-medium text-[var(--color-text-light)]"},"Total Amount:"),e.createElement("p",{className:"text-[var(--color-text)] font-semibold"},"EGP",t.total.toFixed(2))))),e.createElement(x,{title:"Customer Information"},e.createElement("div",{className:"space-y-3"},e.createElement("div",null,e.createElement("span",{className:"text-sm font-medium text-[var(--color-text-light)]"},"Name:"),e.createElement("p",{className:"text-[var(--color-text)]"},t.customer.name)),e.createElement("div",null,e.createElement("span",{className:"text-sm font-medium text-[var(--color-text-light)]"},"Email:"),e.createElement("p",{className:"text-[var(--color-text)]"},t.customer.email)),e.createElement("div",null,e.createElement("span",{className:"text-sm font-medium text-[var(--color-text-light)]"},"Phone:"),e.createElement("p",{className:"text-[var(--color-text)]"},t.customer.phone)))),e.createElement(x,{title:"Delivery Information"},e.createElement("div",null,e.createElement("span",{className:"text-sm font-medium text-[var(--color-text-light)]"},"Delivery Address:"),e.createElement("p",{className:"text-[var(--color-text)] mt-1"},t.customer.deliveryLocation)))),e.createElement(L,{items:t.items}),r&&e.createElement("footer",{className:"mt-8 pt-6 border-t border-[var(--color-border)]"},e.createElement(d,{onClick:a,variant:"danger",size:"large",className:"w-full"},e.createElement(i,{className:"w-5 h-5 mr-2"}),"Cancel Order"))),M=({showCancelConfirm:t,setShowCancelConfirm:r,handleCancelOrder:a,cancelling:l})=>t?e.createElement("div",{className:"fixed inset-0 bg-blur flex items-center justify-center z-50"},e.createElement("div",{className:"bg-[var(--color-background)] rounded-lg p-8 max-w-md w-full mx-4"},e.createElement("div",{className:"text-center"},e.createElement(i,{className:"w-16 h-16 text-[var(--color-error)] mx-auto mb-4"}),e.createElement("h3",{className:"text-xl font-bold text-[var(--color-text)] mb-2"},"Confirm Cancellation"),e.createElement("p",{className:"text-[var(--color-text-light)] mb-6"},"Are you sure you want to cancel this order? This action is permanent and cannot be undone."),e.createElement("div",{className:"flex space-x-4"},e.createElement(d,{onClick:()=>r(!1),variant:"secondary",size:"large",className:"flex-1 text-[var(--color-white)]"},"Go Back"),e.createElement(d,{onClick:a,disabled:l,loading:l,variant:"danger",size:"large",className:"flex-1"},l?"Cancelling...":"Yes, Cancel"))))):null,$=()=>{const[t,r]=n.useState({email:"",orderNumber:""}),[a,l]=n.useState(null),[c,v]=n.useState(!1),[b,E]=n.useState(!1),[g,u]=n.useState(!1),[p,m]=n.useState(""),f=s=>{const{name:o,value:C}=s.target;r(k=>({...k,[o]:C})),p&&m("")},h=async s=>{if(s.preventDefault(),!t.email||!t.orderNumber){m("Please enter both email and order number");return}v(!0),m("");try{const o=await N(t.email,t.orderNumber);l(o.data)}catch(o){m(o.response?.data?.message||"Order not found. Please check your email and order number."),l(null)}finally{v(!1)}},y=async()=>{E(!0);try{await A(t.email,t.orderNumber);const s=await N(t.email,t.orderNumber);l(s.data)}catch{}finally{E(!1),u(!1)}},w=a&&["pending","confirmed"].includes(a.status);return e.createElement("main",{className:"min-h-[90vh] flex justify-center items-center p-2"},e.createElement("div",{className:"max-w-4xl mx-auto space-y-8"},!a&&e.createElement(B,{formData:t,handleInputChange:f,handleTrackOrder:h,loading:c,error:p}),a&&e.createElement(q,{order:a,canCancelOrder:w,onCancelOrder:()=>u(!0)}),e.createElement(M,{showCancelConfirm:g,setShowCancelConfirm:u,handleCancelOrder:y,cancelling:b})))};export{$ as default};
