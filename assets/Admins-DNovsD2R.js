import{A as x,R as e,j as k,F as S,r as u,_ as C}from"./index-Py7kvHa0.js";import{A as F}from"./AdminTable-Ce2ugUIH.js";import{s as v}from"./toastHelper-Cmf0APRO.js";const j=async t=>(await x.post("/admins/create",{adminData:t})).data,D=async()=>(await x.get("/admins/get")).data,I=async(t,n)=>(await x.put(`/admins/update/${t}`,{adminData:n})).data,R=async t=>(await x.delete(`/admins/delete/${t}`)).data,U=({admins:t,loading:n,onAddAdmin:c,onEditAdmin:i,onDeleteAdmin:l,currentUser:m})=>{const d=[{header:"Admin",key:"username",width:"150px",render:r=>e.createElement("div",{className:"text-sm font-medium text-[var(--color-text)]"},r.username)},{header:"Role",key:"role",width:"120px",render:r=>e.createElement("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r.role==="super"?"bg-[var(--color-main)]/10 text-[var(--color-main)]":"bg-[var(--color-accent)]/10 text-[var(--color-accent)]"}`},r.role==="super"?"Super Admin":"Admin")},{header:"Status",key:"isActive",width:"100px",className:"hidden sm:table-cell",cellClassName:"hidden sm:table-cell",render:r=>e.createElement("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r.isActive?"bg-[var(--color-approved-bg)] text-[var(--color-approved-text)]":"bg-[var(--color-canceled-bg)] text-[var(--color-canceled-text)]"}`},r.isActive?"Active":"Inactive")},{header:"Created",key:"createdAt",width:"100px",className:"hidden sm:table-cell",cellClassName:"hidden sm:table-cell",render:r=>e.createElement("span",{className:"text-sm text-[var(--color-text-light)]"},new Date(r.createdAt).toLocaleDateString())}];return e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},e.createElement("div",null,e.createElement("h2",{className:"text-2xl font-bold text-[var(--color-text)]"},"Admins"),e.createElement("p",{className:"text-[var(--color-text-light)]"},"Manage admin accounts")),m?.role==="super"&&e.createElement("button",{onClick:c,className:"flex items-center space-x-2 px-4 py-2 bg-[var(--color-main)] text-white rounded-lg hover:bg-[var(--color-main)]/90 transition-colors"},e.createElement(k,{size:20}),e.createElement("span",null,"Add Admin"))),e.createElement(F,{title:"",description:"",data:t,loading:n,columns:d,onEdit:i,onDelete:l,emptyMessage:"No admins found",showActions:!0,showRefresh:!1,customActions:r=>(m?.role==="super"&&r._id!==m._id,null)}))},q=({isOpen:t,onClose:n,admin:c,formData:i,setFormData:l,onSubmit:m,loading:d,currentUser:r})=>t?e.createElement("div",{className:"fixed inset-0 bg-blur flex items-center justify-center z-50 p-4"},e.createElement("div",{className:"rounded-2xl bg-[var(--color-background)] shadow-2xl max-w-md w-full"},e.createElement("div",{className:"flex items-center justify-between p-6 border-b border-[var(--color-border)]"},e.createElement("h2",{className:"text-2xl font-bold text-[var(--color-text)]"},c?"Edit Admin":"Add New Admin"),e.createElement("button",{onClick:n,className:"p-2 rounded-lg hover:bg-[var(--color-hover)] transition-colors"},e.createElement(S,{size:24}))),e.createElement("form",{onSubmit:m,className:"p-6 space-y-4"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-[var(--color-form-label)] mb-2"},"Username"),e.createElement("input",{type:"text",value:i.username,onChange:o=>l(s=>({...s,username:o.target.value})),className:"w-full input-color px-3 py-2 border border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-main)]",required:!0})),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-[var(--color-form-label)] mb-2"},"Password ",c&&e.createElement("span",{className:"text-[var(--color-form-text)] text-sm"},"(leave empty to keep current password)")),e.createElement("input",{type:"password",value:i.password,onChange:o=>l(s=>({...s,password:o.target.value})),className:"w-full input-color px-3 py-2 border border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-main)]",required:!c})),r?.role==="super"&&e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-[var(--color-form-label)] mb-2"},"Role"),e.createElement("select",{value:i.role,onChange:o=>l(s=>({...s,role:o.target.value})),className:"w-full px-3 py-2 bg-[var(--color-background)] text-[var(--color-white)] border border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-main)]",required:!0},e.createElement("option",{value:"admin"},"Admin"),e.createElement("option",{value:"super"},"Super Admin"))),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-[var(--color-form-label)] mb-2"},"Status"),e.createElement("select",{value:i.isActive,onChange:o=>l(s=>({...s,isActive:o.target.value==="true"})),className:"w-full px-3 py-2 bg-[var(--color-background)] text-[var(--color-white)] border border-[var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-main)]",required:!0},e.createElement("option",{value:"true"},"Active"),e.createElement("option",{value:"false"},"Inactive"))),e.createElement("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-[var(--color-border)]"},e.createElement("button",{type:"button",onClick:n,className:"px-6 py-2 text-[var(--color-text-light)] hover:text-[var(--color-text)] transition-colors"},"Cancel"),e.createElement("button",{type:"submit",disabled:d,className:"px-6 py-2 bg-[var(--color-main)] text-[var(--color-white)] rounded-lg hover:bg-[var(--color-main-dark)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},d?"Saving...":c?"Update Admin":"Add Admin"))))):null,P=t=>typeof t=="string"?t.replace(/\s+/g,""):"",_=t=>typeof t=="string"?t.replace(/\s+/g,""):"",L=({setNoteMessage:t})=>{const[n,c]=u.useState([]),[i,l]=u.useState(!0),[m,d]=u.useState(!1),[r,o]=u.useState(null),[s,g]=u.useState(null),[f,b]=u.useState({username:"",password:"",role:"admin",isActive:!0});u.useEffect(()=>{A(),E()},[]);const E=async()=>{try{const a=await C();g(a.data)}catch(a){console.error("Failed to load current user:",a)}},A=async()=>{try{l(!0);const a=await D();c(a.data)}catch{v(t,"Failed to load admins",!1)}finally{l(!1)}},w=()=>{b({username:"",password:"",role:"admin",isActive:!0}),o(null),d(!0)},y=a=>{b({username:a.username||"",password:"",role:a.role||"admin",isActive:a.isActive!==void 0?a.isActive:!0}),o(a),d(!0)},h=async a=>{a.preventDefault(),l(!0);try{const p={username:P(f.username),password:_(f.password),role:f.role,isActive:f.isActive};r?(await I(r._id,p),v(t,"Admin updated successfully",!0)):(await j(p),v(t,"Admin created successfully",!0)),d(!1),A()}catch(p){v(t,p?.response?.data?.message||"Failed to save admin",!1)}finally{l(!1)}},N=async a=>{if(window.confirm("Are you sure you want to delete this admin?"))try{await R(a),v(t,"Admin deleted successfully",!0),A()}catch(p){v(t,p?.response?.data?.message||"Failed to delete admin",!1)}};return e.createElement("div",{className:"space-y-6"},e.createElement(U,{admins:n,loading:i,onAddAdmin:w,onEditAdmin:y,onDeleteAdmin:N,currentUser:s}),e.createElement(q,{isOpen:m,onClose:()=>d(!1),admin:r,formData:f,setFormData:b,onSubmit:h,loading:i,currentUser:s}))};export{L as default};
